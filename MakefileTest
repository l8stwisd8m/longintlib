# compiler options
CC = gcc
CFLAGS = -Wall
LDFLAGS = -Llib -llongint
RPATH = -Wl,-rpath=./lib

# directories
BIN_DIR = bin
TEST_DIR = test

# source files
SRC_FILES = $(wildcard $(TEST_DIR)/*.c)

# object files
OBJ_FILES = $(SRC_FILES:.c=.o)
UTILS_OBJ = $(UTILS_SRC:.c=.o)

# targets
TARGETS = $(patsubst $(TEST_DIR)/%.c, $(BIN_DIR)/%, $(SRC_FILES))

.PHONY: all clean

all: $(BIN_DIR) $(TARGETS)

$(BIN_DIR):
	mkdir -p $(BIN_DIR)

$(BIN_DIR)/%: $(TEST_DIR)/%.c
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS) $(RPATH)

clean:
	rm -rf $(TARGETS)
